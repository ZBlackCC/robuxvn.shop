<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ROBUXVN.SHOP - RÚT ROBUX GIÁ RẺ NHẤT 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700&family=Orbitron:wght@900&display=swap" rel="stylesheet">
<style>
  :root{--accent:#00d4aa;--gold:#f1c40f;--border:#00d4aa;}
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);font-family:'Roboto',sans-serif;min-height:100vh;overflow-x:hidden;}
  .snow{position:fixed;top:-10px;width:8px;height:8px;background:#fff;border-radius:50%;box-shadow:0 0 12px #fff;opacity:0.8;z-index:9999;pointer-events:none;animation:snowfall linear infinite;}
  @keyframes snowfall{to{transform:translateY(100vh) rotate(360deg);}}

  /* LOGIN SIÊU ĐẸP */
  #loginPage{position:fixed;inset:0;background:linear-gradient(135deg,#0f0033,#1a0033);z-index:999999;display:flex;align-items:center;justify-content:center;padding:20px;animation:fadeIn 1.2s ease;}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  .login-wrapper{background:rgba(255,255,255,0.1);backdrop-filter:blur(22px);padding:50px 40px;border-radius:32px;width:100%;max-width:440px;border:4px solid rgba(0,212,170,0.7);box-shadow:0 30px 80px rgba(0,0,0,0.8);text-align:center;position:relative;overflow:hidden;}
  .login-wrapper::before{content:'';position:absolute;top:-70%;left:-70%;width:240%;height:240%;background:conic-gradient(from 0deg at 50% 50%,transparent,#00d4aa 15%,transparent 30%);animation:spin 28s linear infinite;opacity:0.3;}
  @keyframes spin{to{transform:rotate(360deg)}}
  .login-content{position:relative;z-index:2;}
  .login-wrapper h2{font-family:'Orbitron',sans-serif;font-size:clamp(2.3rem,9vw,4.2rem);color:#fff;text-shadow:0 0 30px #00d4aa,0 0 60px #00d4aa;margin-bottom:8px;}
  .login-wrapper .subtitle{color:#a0f0d8;font-size:18px;font-weight:700;margin-bottom:35px;letter-spacing:1px;}
  .login-box input{background:rgba(255,255,255,0.18);border:2px solid rgba(0,212,170,0.6);color:#fff;padding:19px;border-radius:20px;margin:15px 0;font-size:17px;width:100%;transition:.4s;}
  .login-box input::placeholder{color:#a0f0d8;opacity:0.9;}
  .login-box input:focus{border-color:#00d4aa;box-shadow:0 0 28px rgba(0,212,170,0.7);background:rgba(255,255,255,0.28);}
  .login-box button{width:100%;padding:19px;margin:15px 0;border-radius:20px;font-weight:700;font-size:19px;cursor:pointer;transition:.4s;}
  .login-box button:first-of-type{background:linear-gradient(45deg,#00d4aa,#00a085);color:#fff;border:none;box-shadow:0 14px 40px rgba(0,212,170,0.7);}
  .login-box button:first-of-type:hover{transform:translateY(-8px);box-shadow:0 20px 50px rgba(0,212,170,0.9);}
  .login-box button:last-of-type{background:#f1c40f;color:#000;border:none;}

  /* HEADER */
  .header{background:linear-gradient(135deg,#00d4aa,#00a085);padding:26px 10px;text-align:center;box-shadow:0 12px 45px rgba(0,212,170,0.5);}
  .header h1{font-family:'Orbitron',sans-serif;font-size:clamp(2rem,8vw,3.6rem);color:#fff;text-shadow:0 0 20px #000,4px 4px 0 var(--gold);letter-spacing:3px;}
  .header p{color:#fff;font-size:clamp(1.2rem,4.5vw,1.6rem);margin-top:10px;font-weight:900;text-shadow:0 0 14px #000;}

  /* NAV PC - NGANG SCROLL */
  .nav-pc{display:flex;justify-content:flex-start;gap:12px;padding:14px 10px;background:#fff;position:sticky;top:0;z-index:99;box-shadow:0 6px 25px rgba(0,0,0,0.18);border-bottom:4px solid var(--accent);overflow-x:auto;scrollbar-width:none;scroll-snap-type:x mandatory;}
  .nav-pc::-webkit-scrollbar{display:none}
  .nav-pc button{flex:0 0 auto;min-width:120px;padding:14px 16px;white-space:nowrap;background:#fff;color:#000;border-radius:25px;font-weight:700;font-size:15px;border:3px solid #eee;transition:all .3s;box-shadow:0 4px 15px rgba(0,0,0,0.1);scroll-snap-align:center;}
  .nav-pc button:hover,.nav-pc button.active{background:var(--accent);color:#fff;transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,212,170,0.5);border-color:var(--accent);}
  .nav-pc button:last-child{background:#e74c3c;color:#fff;border-color:#e74c3c;}

  /* NAV MOBILE - DỌC HAMBURGER */
  .nav-mobile{display:none;position:sticky;top:0;z-index:99;background:#fff;padding:14px 20px;box-shadow:0 6px 25px rgba(0,0,0,0.18);border-bottom:4px solid var(--accent);}
  .hamburger{font-size:32px;cursor:pointer;color:#333;}
  .mobile-menu{position:fixed;top:0;left:-100%;width:280px;height:100vh;background:#111;transition:left .35s ease;z-index:9999;padding-top:90px;overflow-y:auto;}
  .mobile-menu.active{left:0;}
  .mobile-menu button{display:block;width:100%;text-align:left;padding:20px 28px;color:#fff;background:none;border:none;font-size:18px;font-weight:700;border-bottom:1px solid #333;transition:.3s;}
  .mobile-menu button:hover,.mobile-menu button.active{background:var(--accent);}
  .mobile-menu button:last-child{background:#e74c3c;}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);opacity:0;visibility:hidden;transition:opacity .35s;z-index:9998;}
  .overlay.active{opacity:1;visibility:visible;}

  /* NỘI DUNG CHÍNH */
  .container{max-width:780px;margin:20px auto;background:#fff;padding:26px;border-radius:28px;border:6px solid var(--border);box-shadow:0 20px 60px rgba(0,212,170,0.35);}
  h2{color:var(--accent);text-align:center;margin-bottom:22px;font-size:clamp(1.9rem,5.5vw,2.6rem);}
  input,button,select{width:100%;padding:16px;margin:12px 0;border-radius:16px;font-size:17px;font-weight:600;}
  input,select{background:#f8f9fa;border:3px solid #ddd;}
  input:focus,select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 20px rgba(0,212,170,0.45);}
  button{background:linear-gradient(45deg,var(--accent),#00b894);color:#fff;border:none;cursor:pointer;box-shadow:0 10px 28px rgba(0,212,170,0.45);}
  button:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,212,170,0.7);}
  .packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:14px;margin:22px 0;}
  .pkg{background:#f0f2f5;padding:18px;border-radius:16px;text-align:center;cursor:pointer;font-weight:bold;font-size:16px;border:3px solid #ddd;transition:.35s;}
  .pkg:hover,.pkg.selected{background:var(--accent);color:#fff;border-color:var(--accent);transform:scale(1.08);}
  .tab{display:none}.tab.active{display:block}.hidden{display:none}
  .gd-item{padding:14px;background:#fff;margin:8px 0;border-radius:12px;border-left:6px solid var(--accent);font-size:15px;}
  .hist-box{padding:16px;margin:12px 0;border-radius:14px;background:#fafafa;border-left:7px solid var(--accent);position:relative;font-size:15px;}
  .hist-box.rut{border-left-color:#e74c3c;}
  .status{font-size:13px;font-weight:bold;position:absolute;top:10px;right:12px;}
  .status.success{color:#27ae60;}
  #popup{position:fixed;inset:0;background:rgba(0,0,0,0.9);display:none;justify-content:center;align-items:center;z-index:999999;}
  #popupBox{background:#fff;padding:35px 28px;border-radius:25px;width:90%;max-width:410px;text-align:center;animation:pop 0.5s ease;box-shadow:0 30px 70px rgba(0,0,0,0.7);}
  @keyframes pop{from{transform:scale(0.5);opacity:0} to{transform:scale(1);opacity:1}}

  @media (max-width:768px){.nav-pc{display:none;}.nav-mobile{display:block;}}
  @media (min-width:769px){.nav-mobile,.mobile-menu,.overlay{display:none !important;}}
</style>
</head>
<body>
<div id="snowZone"></div>

<!-- LOGIN - SHOP ROBUX UY TÍN NHẤT 2025 -->
<div id="loginPage">
  <div class="login-wrapper">
    <div class="login-content">
      <h2>ROBUXVN.SHOP</h2>
      <div class="subtitle">SHOP ROBUX UY TÍN NHẤT 2025</div>
      <div class="login-box">
        <input type="text" id="username" placeholder="Username (tối thiểu 6 ký tự)">
        <input type="password" id="password" placeholder="Mật khẩu (tối thiểu 6 ký tự)">
        <button onclick="login()">ĐĂNG NHẬP</button>
        <button onclick="register()">ĐĂNG KÝ NGAY</button>
      </div>
    </div>
  </div>
</div>

<div class="header"><h1>ROBUXVN.SHOP</h1><p>SHOP ROBUX RẺ NHẤT 2025</p></div>

<!-- NAV PC -->
<div class="nav-pc">
  <button onclick="openTab('home')" class="active">TRANG CHỦ</button>
  <button onclick="openTab('nap')">NẠP ROBUX</button>
  <button onclick="openTab('rut')">RÚT ROBUX</button>
  <button onclick="openTab('vongquay')">VÒNG QUAY</button>
  <button onclick="openTab('giftcode')">GIFTCODE</button>
  <button onclick="openTab('danhgia')">ĐÁNH GIÁ</button>
  <button onclick="logout()">ĐĂNG XUẤT</button>
</div>

<!-- NAV MOBILE -->
<div class="nav-mobile"><div class="hamburger" onclick="toggleMenu()">Menu</div></div>
<div class="mobile-menu" id="mobileMenu">
  <button onclick="openTab('home');toggleMenu()" class="active">TRANG CHỦ</button>
  <button onclick="openTab('nap');toggleMenu()">NẠP ROBUX</button>
  <button onclick="openTab('rut');toggleMenu()">RÚT ROBUX</button>
  <button onclick="openTab('vongquay');toggleMenu()">VÒNG QUAY</button>
  <button onclick="openTab('giftcode');toggleMenu()">GIFTCODE</button>
  <button onclick="openTab('danhgia');toggleMenu()">ĐÁNH GIÁ</button>
  <button onclick="logout();toggleMenu()">ĐĂNG XUẤT</button>
</div>
<div class="overlay" onclick="toggleMenu()" id="overlay"></div>

<div class="container">
  <div id="home" class="tab active">
    <h2>Xin chào <span id="name">bạn</span>!</h2>
    <p style="text-align:center;font-size:32px;margin:38px 0">Số dư: <b id="bal" style="color:var(--gold)">0</b> Robux</p>
    <div style="text-align:center"><button onclick="openTab('nap')" style="padding:22px 80px;font-size:24px">NẠP ROBUX NGAY</button></div>
    <div style="margin-top:35px">
      <h2 style="font-size:23px;margin-bottom:14px;text-align:left">Giao dịch gần đây</h2>
      <div id="gdList" style="height:220px;overflow:hidden;border:4px solid var(--accent);border-radius:16px;background:#f9f9f9;padding:12px"></div>
    </div>
  </div>

  <div id="nap" class="tab">
    <h2>NẠP ROBUX</h2>
    <p style="text-align:center;color:#555;margin-bottom:16px;font-size:17px">10.000đ = 65 Robux</p>
    <select id="napMethod" onchange="toggleNap()">
      <option value="qr">QR NGÂN HÀNG (TỰ ĐỘNG)</option>
      <option value="thecao">NẠP THẺ CÀO</option>
    </select>
    <div id="qrBox">
      <input type="number" id="qrAmount" placeholder="Nhập số tiền (VD: 100000)" oninput="calcQR()">
      <div id="qrPreview" style="text-align:center;font-size:21px;margin:16px 0;color:var(--gold)">0 Robux</div>
      <div class="packages">
        <div class="pkg" onclick="setQR(50000)">50K</div>
        <div class="pkg" onclick="setQR(100000)">100K</div>
        <div class="pkg" onclick="setQR(200000)">200K</div>
        <div class="pkg" onclick="setQR(500000)">500K</div>
      </div>
      <button onclick="createQR()">NẠP NGAY</button>
    </div>
    <div id="cardBox" class="hidden">
      <p style="text-align:center;font-weight:bold;margin:16px 0">Chọn mệnh giá:</p>
      <div class="packages">
        <div class="pkg" onclick="chooseCard(10000)">10K</div>
        <div class="pkg" onclick="chooseCard(20000)">20K</div>
        <div class="pkg" onclick="chooseCard(50000)">50K</div>
        <div class="pkg" onclick="chooseCard(100000)">100K</div>
        <div class="pkg" onclick="chooseCard(200000)">200K</div>
        <div class="pkg" onclick="chooseCard(500000)">500K</div>
      </div>
      <select id="cardType"><option>Viettel</option><option>Vinaphone</option><option>Mobifone</option><option>Zing</option><option>Gate</option></select>
      <input type="text" id="seri" placeholder="Số seri">
      <input type="text" id="code" placeholder="Mã thẻ">
      <button onclick="sendCard()">NẠP NGAY</button>
    </div>
    <h2 style="margin-top:28px;font-size:21px;text-align:left">Lịch sử nạp</h2>
    <div id="lsNapBox"></div>
  </div>

  <div id="rut" class="tab">
    <h2>RÚT ROBUX</h2>
    <input type="text" placeholder="Username Roblox" id="rbxUser">
    <input type="number" placeholder="Số Robux muốn rút" id="rbxAmt">
    <button id="rutBtn">GỬI YÊU CẦU</button>
    <h2 style="margin-top:28px;font-size:21px;text-align:left">Lịch sử rút</h2>
    <div id="lsRutBox"></div>
  </div>

  <div id="vongquay" class="tab">
    <h2>VÒNG QUAY MAY MẮN</h2>
    <p style="text-align:center;font-size:24px;margin-bottom:22px">Giá quay: <b style="color:var(--gold)">30 Robux</b>/lần</p>
    <div style="text-align:center">
      <canvas id="wheel" width="340" height="340"></canvas>
      <div class="prize" id="prizeText" style="font-size:20px;margin:20px 0">Nhấn QUAY để thử vận may!</div>
      <button onclick="spin()" style="margin-top:20px;padding:20px 70px;font-size:21px">QUAY NGAY</button>
    </div>
  </div>

  <div id="giftcode" class="tab"><h2>NHẬP GIFTCODE</h2><input type="text" id="giftInput" placeholder="Nhập mã giftcode"><button onclick="useGift()">SỬ DỤNG</button></div>
  <div id="danhgia" class="tab"><h2>ĐÁNH GIÁ 5★</h2><div id="reviews"></div></div>
</div>

<div id="popup">
  <div id="popupBox">
    <h3 style="color:var(--accent);font-size:26px;margin-bottom:18px">CHÀO MỪNG BẠN ĐÃ QUAY LẠI!</h3>
    <p style="font-size:17px;line-height:1.9;color:#333">
      Thời gian duyệt thẻ: <b>1 - 3 phút</b><br>
      QR tự động cộng ngay khi chuyển đúng nội dung<br><br>
      Không nhận thẻ VietnamMobile<br>
      Giá rẻ nhất thị trường - Nạp thử 10K để kiểm tra uy tín!<br><br>
      <b style="color:var(--accent)">Liên hệ Zalo: 0939546882</b>
    </p>
    <button onclick="closePopup()" style="margin-top:22px;padding:16px 40px;font-size:19px;background:var(--accent);color:#fff;border:none;border-radius:16px;">VÀO SHOP NGAY</button>
  </div>
</div>

<script>
let currentUser = { username: "guest", balance: 0 };
let cardAmount = 0;
let lsNap = JSON.parse(localStorage.getItem("lsNap_v2") || "[]");
let lsRut = JSON.parse(localStorage.getItem("lsRut_v2") || "[]");

function maskName(name){if(!name||name.length<4)return"******";const half=Math.ceil(name.length/2);return name.substring(0,half)+"*".repeat(name.length-half+2);}
function showPopup(html){document.getElementById("popup").style.display="flex";document.getElementById("popupBox").innerHTML=html;}
function closePopup(){document.getElementById("popup").style.display="none";}
function login(){
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("password").value;
  if(u.length<6||p.length<6)return alert("Username và mật khẩu phải ≥ 6 ký tự!");
  currentUser.username=u;document.getElementById("loginPage").style.display="none";
  document.getElementById("name").innerText=u;document.getElementById("bal").innerText="0";
  if(localStorage.getItem("welcomeShown")!=="true"){setTimeout(()=>{document.getElementById("popup").style.display="flex";localStorage.setItem("welcomeShown","true");},800);}
  updateAllHistory();renderFeed();
}
function register(){alert("Đăng ký thành công! Giờ đăng nhập đi bro!");}
function logout(){if(confirm("Đăng xuất ngay?"))location.reload();}

function calcQR(){const m=parseInt(document.getElementById("qrAmount").value)||0;const r=Math.floor(m/10000*65);document.getElementById("qrPreview").innerHTML=`<b>${r.toLocaleString()}</b> Robux`;}
function setQR(x){document.getElementById("qrAmount").value=x;calcQR();}
function createQR(){
  const amount=parseInt(document.getElementById("qrAmount").value);
  if(!amount||amount<10000)return alert("Tối thiểu 10.000đ!");
  const user=currentUser.username.toUpperCase();
  const noiDung=`ROBUXVN-${user}-${amount}`;
  const qrUrl=`https://img.vietqr.io/image/mbbank-0939546882-compact.png?amount=${amount}&addInfo=${encodeURIComponent(noiDung)}&accountName=ROBUXVN%20SHOP`;
  showPopup(`<b>Quét QR để chuyển khoản</b><br><br><img src="${qrUrl}" style="width:240px;border-radius:14px"><br><br><b>STK:</b> 0939546882 (MB Bank)<br><b>Nội dung:</b> <span style="color:#00d4aa">${noiDung}</span><br><br>Sau khi chuyển, Robux cộng ngay!`);
  const rb=Math.floor(amount/10000*65);
  pushNap({user:currentUser.username,amount,robux:rb,time:new Date().toLocaleString(),status:"success"});
  addTransaction(`${currentUser.username} vừa nạp ${amount.toLocaleString()}đ (+${rb} Robux)`);
}
function chooseCard(v){cardAmount=v;document.querySelectorAll("#cardBox .pkg").forEach(e=>e.classList.toggle("selected",e===event.target));}
function sendCard(){
  if(cardAmount===0)return alert("Chọn mệnh giá!");const seri=document.getElementById("seri").value.trim();const code=document.getElementById("code").value.trim();
  if(!seri||!code)return alert("Nhập đầy đủ seri + mã thẻ!");alert("Thẻ đã gửi! Admin duyệt trong 1-3 phút");
  const rb=Math.floor(cardAmount/10000*65);const id=Date.now();
  pushNap({id,user:currentUser.username,amount:cardAmount,robux:rb,time:new Date().toLocaleString(),status:"pending",note:"Nạp thẻ"});
  addTransaction(`${currentUser.username} gửi thẻ ${cardAmount.toLocaleString()}đ (chờ duyệt)`);
  document.getElementById("seri").value=document.getElementById("code").value="";cardAmount=0;document.querySelectorAll("#cardBox .pkg").forEach(p=>p.classList.remove("selected"));
  setTimeout(()=>approveNap(id),30000);
}
function approveNap(id){const idx=lsNap.findIndex(x=>x.id===id);if(idx>-1){lsNap[idx].status="success";localStorage.setItem("lsNap_v2",JSON.stringify(lsNap));updateAllHistory();renderFeed();}}
document.getElementById("rutBtn").onclick=function(){
  const userRbx=document.getElementById("rbxUser").value.trim();const amt=parseInt(document.getElementById("rbxAmt").value);
  if(!userRbx||!amt||amt<1)return alert("Nhập đầy đủ thông tin!");const id=Date.now();
  pushRut({id,user:currentUser.username,robux:amt,to:userRbx,time:new Date().toLocaleString(),status:"pending"});
  addTransaction(`${currentUser.username} yêu cầu rút ${amt} Robux → ${userRbx}`);alert("Yêu cầu đã gửi! Admin donate trong 5-10 phút");
  setTimeout(()=>approveRut(id),30000);
};
function approveRut(id){const idx=lsRut.findIndex(x=>x.id===id);if(idx>-1){lsRut[idx].status="success";localStorage.setItem("lsRut_v2",JSON.stringify(lsRut));updateAllHistory();renderFeed();}}
const fakeNames=["tranvanlong","nguyenvana","levinh","phamminhk","hotuananh","dangthilan","buithilan"];
function addTransaction(text){const div=document.createElement("div");div.className="gd-item";div.innerText=text;document.getElementById("gdList").prepend(div);setTimeout(renderFeed,1000);}
function renderFeed(){
  const real=[];lsNap.slice(-10).forEach(e=>real.push(`${maskName(e.user)} ${e.status==="pending"?"gửi thẻ":"nạp"} ${e.amount?.toLocaleString()||""}đ`));
  lsRut.slice(-10).forEach(e=>real.push(`${maskName(e.user)} rút ${e.robux} Robux`));
  const mixed=[...real,...fakeNames.map(n=>`${maskName(n)} vừa nạp 100.000đ`)];
  const shuffled=mixed.sort(()=>Math.random()-0.5).slice(0,15);
  document.getElementById("gdList").innerHTML=shuffled.map(t=>`<div class="gd-item">${t}</div>`).join('');
}
setInterval(renderFeed,4000);renderFeed();
function updateAllHistory(){updateNapLS();updateRutLS();}
function updateNapLS(){
  const box=document.getElementById("lsNapBox");const list=lsNap.filter(x=>x.user===currentUser.username).reverse();
  box.innerHTML=list.length===0?`<div class="hist-box">Chưa có lịch sử nạp</div>`:list.map(x=>`<div class="hist-box">+${x.robux} Robux ${x.amount?`(${x.amount.toLocaleString()}đ)`:""} <span class="status ${x.status}">${x.status==="pending"?"Đang xét duyệt":"Thành công"}</span><br><small>${x.time}${x.note?" • "+x.note:""}</small></div>`).join('');
}
function updateRutLS(){
  const box=document.getElementById("lsRutBox");const list=lsRut.filter(x=>x.user===currentUser.username).reverse();
  box.innerHTML=list.length===0?`<div class="hist-box rut">Chưa có lịch sử rút</div>`:list.map(x=>`<div class="hist-box rut">-${x.robux} Robux → <b>${x.to}</b> <span class="status ${x.status}">${x.status==="pending"?"Đang xét duyệt":"Thành công"}</span><br><small>${x.time}</small></div>`).join('');
}
function openTab(id){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.nav-pc button,.mobile-menu button').forEach(b=>b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  const btn=document.querySelector(`.nav-pc button[onclick="openTab('${id}')"],.mobile-menu button[onclick*="openTab('${id}')"]`);
  if(btn)btn.classList.add('active');
}
function toggleNap(){const v=document.getElementById("napMethod").value;document.getElementById("qrBox").classList.toggle("hidden",v==="thecao");document.getElementById("cardBox").classList.toggle("hidden",v!=="thecao");}
function toggleMenu(){document.getElementById("mobileMenu").classList.toggle("active");document.getElementById("overlay").classList.toggle("active");}

const prizes=["5","10","30","50","200","500 Robux"],colors=["#95a5a6","#7289da","#2ecc71","#3498db","#e74c3c","#f1c40f"];
const canvas=document.getElementById("wheel");const ctx=canvas.getContext("2d");
function drawWheel(){prizes.forEach((p,i)=>{ctx.fillStyle=colors[i];ctx.beginPath();ctx.moveTo(170,170);ctx.arc(170,170,170,i*60*Math.PI/180,(i+1)*60*Math.PI/180);ctx.fill();ctx.save();ctx.translate(170,170);ctx.rotate((i+0.5)*60*Math.PI/180);ctx.fillStyle="#fff";ctx.font="bold 20px Roboto";ctx.fillText(p,75,10);ctx.restore();});}
drawWheel();
let spinning=false;
function spin(){
  if(spinning)return;spinning=true;document.getElementById("wheel").style.transform=`rotate(${3600+Math.random()*360}deg)`;
  setTimeout(()=>{const win=prizes[Math.floor(Math.random()*prizes.length)];const num=parseInt(win);document.getElementById("prizeText").innerHTML=`CHÚC MỪNG!<br><b style="font-size:4.5rem">${win}</b>`;
    if(!isNaN(num)){pushNap({user:currentUser.username,robux:num,time:new Date().toLocaleString(),status:"success",note:"Vòng quay"});addTransaction(`${currentUser.username} trúng ${num} Robux`);updateAllHistory();}
    spinning=false;
  },6000);
}
function useGift(){
  const c=document.getElementById("giftInput").value.trim().toUpperCase();
  if(["NOEL2025","ROBUXVN","FREE500"].includes(c)){pushNap({user:currentUser.username,robux:500,time:new Date().toLocaleString(),status:"success",note:"Giftcode "+c});alert("NHẬN 500 ROBUX THÀNH CÔNG!");updateAllHistory();renderFeed();}
  else alert("Mã sai rồi bro!");
}
for(let i=0;i<120;i++){
  const s=document.createElement("div");s.className="snow";s.style.left=Math.random()*100+"vw";s.style.animationDuration=8+Math.random()*14+"s";s.style.animationDelay=Math.random()*12+"s";s.style.opacity=Math.random()*0.7+0.3;
  document.getElementById("snowZone").appendChild(s);
}
const reviews=["Rút 1 phút có","Nạp thẻ cào tự động","Giá rẻ nhất VN","Admin donate nhanh","Shop đẹp xỉu","24/7 có người duyệt!"];
reviews.forEach(t=>document.getElementById("reviews").innerHTML+=`<div style="background:#f9f9f9;padding:22px;margin:18px 0;border-radius:20px;border-left:7px solid var(--gold);box-shadow:0 10px 30px rgba(0,0,0,0.12)"><div style="color:var(--gold);font-size:2.2rem">★★★★★</div><p style="margin:10px 0;font-weight:bold">Khách hàng ẩn danh</p><p style="font-size:19px">${t}</p></div>`);
function pushNap(obj){lsNap.push(obj);localStorage.setItem("lsNap_v2",JSON.stringify(lsNap));}
function pushRut(obj){lsRut.push(obj);localStorage.setItem("lsRut_v2",JSON.stringify(lsRut));}
</script>
</body>
</html>

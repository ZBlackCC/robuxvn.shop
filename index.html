<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ROBUXVN.SHOP - RÚT ROBUX GIÁ RẺ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700&family=Orbitron:wght@900&display=swap" rel="stylesheet">
<style>
  :root{--bg:#f0f2f5;--card:#fff;--text:#000;--accent:#00d4aa;--gold:#f1c40f;--border:#00d4aa;}
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#f0f2f5 url('https://i.imgur.com/5wR1pXb.png') repeat;color:var(--text);font-family:'Roboto',sans-serif;min-height:100vh;}
  .header{background:linear-gradient(135deg,#00d4aa,#00a085);padding:30px;text-align:center;box-shadow:0 8px 30px rgba(0,212,170,0.4);}
  .header h1{font-family:'Orbitron',sans-serif;font-size:4.5rem;color:#fff;text-shadow:0 0 20px #000,4px 4px var(--gold);}

  /* Tab ngang đẹp */
  .nav{
    display:flex;justify-content:center;flex-wrap:nowrap;overflow-x:auto;gap:5px;padding:15px 10px;
    background:#fff;position:sticky;top:0;z-index:99;box-shadow:0 4px 20px rgba(0,0,0,0.1);
    scrollbar-width:none;
  }
  .nav::-webkit-scrollbar{display:none;}
  .nav button{
    white-space:nowrap;background:#fff;color:#000;padding:12px 22px;border:2px solid transparent;
    border-radius:12px;font-weight:700;cursor:pointer;transition:.3s;min-width:120px;
  }
  .nav button:hover,.nav button.active{
    background:var(--accent);color:#fff;border-color:var(--accent);
    box-shadow:0 0 20px rgba(0,212,170,0.5);
  }

  .container{max-width:700px;margin:30px auto;background:var(--card);padding:30px;border-radius:20px;
    border:3px solid var(--border);box-shadow:0 15px 50px rgba(0,212,170,0.25);}

  h2{color:var(--accent);text-align:center;margin-bottom:25px;font-size:2.3rem;}
  .tab{display:none}.tab.active{display:block}

  /* Nạp tiền */
  .packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:20px;margin:30px 0;}
  .pkg{background:#f8f9fa;padding:25px;border-radius:15px;text-align:center;cursor:pointer;border:2px solid #eee;transition:.4s;}
  .pkg:hover{border-color:var(--accent);transform:translateY(-10px);box-shadow:0 20px 40px rgba(0,212,170,0.3);}
  .pkg h3{font-size:2rem;color:var(--gold);}
  #robuxPreview{font-size:28px;color:var(--gold);font-weight:bold;text-align:center;margin:20px 0;}

  input,button{width:100%;padding:16px;margin:12px 0;border:none;border-radius:12px;font-size:17px;}
  input{background:#f5f5f5;color:#000;border:2px solid #ddd;}
  button{background:linear-gradient(45deg,var(--accent),#00b894);color:#fff;font-weight:700;cursor:pointer;}
  button:hover{transform:translateY(-4px);box-shadow:0 15px 35px rgba(0,212,170,0.7);}

  .qr{max-width:300px;margin:30px auto;display:block;border:6px solid var(--accent);border-radius:18px;}

  /* Vòng quay – 6 phần bằng nhau */
  #wheel{width:340px;height:340px;border-radius:50%;border:12px solid #fff;box-shadow:0 0 50px var(--accent);}
  .prize{font-size:2.5rem;color:var(--gold);font-weight:bold;margin-top:20px;}
</style>
</head>
<body>

<div class="header"><h1>ROBUXVN.SHOP</h1></div>

<div class="nav">
  <button onclick="openTab('home')" class="active">TRANG CHỦ</button>
  <button onclick="openTab('nap')">NẠP ROBUX</button>
  <button onclick="openTab('rut')">RÚT ROBUX</button>
  <button onclick="openTab('vongquay')">VÒNG QUAY</button>
  <button onclick="openTab('giftcode')">GIFTCODE</button>
  <button onclick="openTab('danhgia')">ĐÁNH GIÁ</button>
</div>

<div class="container">

  <!-- Trang chủ -->
  <div id="home" class="tab active">
    <h2>Xin chào <span id="name">khách</span>!</h2>
    <p style="text-align:center;font-size:28px;margin:30px 0">
      Số dư: <b id="bal" style="color:var(--gold)">0</b> Robux
    </p>
    <div style="text-align:center"><button onclick="openTab('nap')" style="padding:20px 60px;font-size:22px">NẠP ROBUX NGAY</button></div>
  </div>

  <!-- Nạp Robux -->
  <div id="nap" class="tab">
    <h2>NẠP ROBUX QUA NGÂN HÀNG</h2>
    <p style="text-align:center;color:#555;margin-bottom:15px"><b>10.000đ = 65 Robux</b></p>
    
    <input type="number" id="amount" placeholder="Nhập số tiền (VD: 100000)" oninput="calcRobux()">
    <div id="robuxPreview">0 Robux</div>
    
    <div class="packages">
      <div class="pkg" onclick="document.getElementById('amount').value=100000;calcRobux()"><h3>100K</h3><p>650 Robux</p></div>
      <div class="pkg" onclick="document.getElementById('amount').value=200000;calcRobux()"><h3>200K</h3><p>1.300 Robux</p></div>
      <div class="pkg" onclick="document.getElementById('amount').value=500000;calcRobux()"><h3>500K</h3><p>3.250 Robux</p></div>
      <div class="pkg" onclick="document.getElementById('amount').value=1000000;calcRobux()"><h3>1 TRIỆU</h3><p>6.500 Robux</p></div>
    </div>
    
    <button onclick="createQR()">TẠO MÃ QR</button>
    <div id="qrDiv"></div>
  </div>

  <!-- Rút Robux -->
  <div id="rut" class="tab">
    <h2>RÚT ROBUX</h2>
    <input type="text" id="rbxUser" placeholder="Username Roblox">
    <input type="number" id="rbxAmt" placeholder="Số Robux muốn rút">
    <button onclick="sendRut()">GỬI YÊU CẦU</button>
    <p id="rutMsg"></p>
  </div>

  <!-- Vòng quay may mắn -->
  <div id="vongquay" class="tab">
    <h2>VÒNG QUAY MAY MẮN</h2>
    <p style="text-align:center;font-size:22px;margin-bottom:25px">
      Giá quay: <b style="color:var(--gold)">30 Robux</b> / lần
    </p>
    <div style="text-align:center">
      <canvas id="wheel" width="340" height="340"></canvas>
      <div class="prize" id="prizeText">Nhấn QUAY để bắt đầu!</div>
      <button onclick="spin()" style="margin-top:25px;padding:18px 60px;font-size:20px">QUAY NGAY – 30 Robux</button>
    </div>
  </div>

  <!-- Giftcode & Đánh giá giữ nguyên đẹp như cũ -->
  <div id="giftcode" class="tab"><h2>NHẬP GIFTCODE</h2><input type="text" id="giftInput" placeholder="Nhập mã"><button onclick="useGift()">SỬ DỤNG</button><p id="giftMsg"></p></div>
  <div id="danhgia" class="tab"><h2>ĐÁNH GIÁ 5★</h2><div id="reviews"></div></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
// Tab
function openTab(t){
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  document.querySelectorAll('.nav button').forEach(x=>x.classList.remove('active'));
  document.getElementById(t).classList.add('active');
  document.querySelector(`button[onclick="openTab('${t}')"]`).classList.add('active');
}

// Tự động đổi tiền → Robux
function calcRobux(){
  const money = parseInt(document.getElementById("amount").value) || 0;
  const robux = Math.floor(money / 10000 * 65);
  document.getElementById("robuxPreview").innerHTML = `<b style="font-size:32px">${robux.toLocaleString()}</b> Robux`;
}
calcRobux(); // init

// Nạp QR
async function createQR(){
  const a = document.getElementById("amount").value;
  if(!a||a<50000)return alert("Tối thiểu 50k");
  const r = await axios.post("/qr",{amount:Number(a),user:"demo"});
  document.getElementById("qrDiv").innerHTML=`
    <p style="text-align:center">Nạp <b>${(a/10000*65).toLocaleString()} Robux</b></p>
    <img class="qr" src="${r.data.qr}">
    <p style="text-align:center;word-break:break-all"><b>Nội dung:</b> ${r.data.desc}</p>`;
}

// Vòng quay – 6 phần bằng nhau, tỉ lệ thật siêu hiếm
const prizes = [
  {text:"5 Robux",   color:"#95a5a6", weight:300},
  {text:"10 Robux",  color:"#7289da", weight:250},
  {text:"30 Robux",  color:"#2ecc71", weight:200},
  {text:"50 Robux",  color:"#3498db", weight:150},
  {text:"200 Robux", color:"#e74c3c", weight:5},
  {text:"500 Robux", color:"#f1c40f", weight:1}
];
let spinning = false;
function drawWheel(){
  const c = document.getElementById("wheel");
  const ctx = c.getContext("2d");
  const total = prizes.reduce((a,b)=>a+b.weight,0);
  let start = 0;
  prizes.forEach((p,i)=>{
    const angle = (p.weight/total)*2*Math.PI;
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.moveTo(170,170);
    ctx.arc(170,170,170,start,start+angle);
    ctx.fill();
    ctx.save();
    ctx.translate(170,170);
    ctx.rotate(start+angle/2);
    ctx.fillStyle = "#fff";
    ctx.font = "bold 20px Roboto";
    ctx.fillText(p.text, 90, 10);
    ctx.restore();
    start += angle;
  });
}
drawWheel();

function spin(){
  if(spinning) return;
  spinning = true;
  document.getElementById("prizeText").innerText = "Đang quay...";
  const canvas = document.getElementById("wheel");
  const spins = Math.floor(Math.random()*10) + 15;
  const rand = Math.random() * 3600 + 720;
  canvas.style.transition = "transform 5s cubic-bezier(0.17,0.67,0.12,0.99)";
  canvas.style.transform = `rotate(${rand}deg)`;

  setTimeout(()=>{
    const total = prizes.reduce((a,b)=>a+b.weight,0);
    let roll = Math.random() * total;
    let winner;
    for(let p of prizes){
      roll -= p.weight;
      if(roll <= 0){winner = p; break;}
    }
    document.getElementById("prizeText").innerHTML = `CHÚC MỪNG!<br><b style="font-size:3rem;color:${winner.color}">${winner.text}</b>`;
    spinning = false;
  }, 5200);
}

// Giftcode + đánh giá giữ nguyên đẹp
function useGift(){
  const c = document.getElementById("giftInput").value.trim().toUpperCase();
  if(["NOEL2025","ROBUXVN","FREE500"].includes(c)){
    alert("Nhận thành công 500 Robux!");
  }else alert("Mã sai!");
}
const reviews = ["Shop uy tín, rút siêu nhanh!","Nạp 500k được đúng 3250R","Trúng 200R từ vòng quay, ngon!","Admin nhiệt tình, donate đúng user","Giá rẻ nhất thị trường","Rút 3h sáng vẫn có người duyệt!"];
function genReviews(){
  const div = document.getElementById("reviews");
  reviews.sort(()=>Math.random()-0.5).forEach(t=>{
    div.innerHTML += `<div style="background:#f9f9f9;padding:20px;margin:15px 0;border-radius:15px;border-left:5px solid var(--gold)">
      <div style="color:#f1c40f;font-size:1.5rem">★★★★★</div><b>Khách hàng ẩn danh</b><p>${t}</p></div>`;
  });
}
genReviews();
</script>
</body>
</html>

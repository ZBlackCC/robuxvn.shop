<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ROBUXVN.SHOP - RÚT ROBUX GIÁ RẺ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700&family=Orbitron:wght@900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root{--bg:#f0f2f5;--card:#ffffff;--text:#000;--accent:#00d4aa;--gold:#ffbb00;--border:#00d4aa;}
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#f0f2f5 url('https://i.imgur.com/5wR1pXb.png') repeat;color:var(--text);font-family:'Roboto',sans-serif;min-height:100vh;}
  .header{background:linear-gradient(135deg,#00d4aa,#0099cc);padding:30px;text-align:center;box-shadow:0 8px 30px rgba(0,212,170,0.4);}
  .header h1{font-family:'Orbitron',sans-serif;font-size:4.5rem;color:#fff;text-shadow:0 0 20px #000,4px 4px #ffbb00;}
  .nav{display:flex;justify-content:center;flex-wrap:wrap;gap:12px;padding:15px;background:#fff;position:sticky;top:0;z-index:99;box-shadow:0 4px 20px rgba(0,0,0,0.1);}
  .nav button{background:#fff;color:#000;padding:12px 25px;border:2px solid transparent;border-radius:12px;font-weight:700;cursor:pointer;transition:.3s;}
  .nav button:hover,.nav button.active{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 0 20px rgba(0,212,170,0.5);}

  .container{max-width:680px;margin:30px auto;background:var(--card);padding:30px;border-radius:20px;
    border:3px solid var(--border);box-shadow:0 15px 50px rgba(0,212,170,0.25);}

  h2{color:var(--accent);text-align:center;margin-bottom:25px;font-size:2.2rem;}
  .tab{display:none}.tab.active{display:block}

  .packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:20px;margin:30px 0;}
  .pkg{background:#f8f9fa;padding:25px;border-radius:15px;text-align:center;cursor:pointer;border:2px solid #eee;transition:.4s;}
  .pkg:hover{border-color:var(--accent);transform:translateY(-12px);box-shadow:0 20px 40px rgba(0,212,170,0.3);}
  .pkg h3{font-size:2.2rem;color:var(--gold);}

  input,button{width:100%;padding:16px;margin:12px 0;border:none;border-radius:12px;font-size:17px;}
  input{background:#f5f5f5;color:#000;border:2px solid #ddd;}
  button{background:linear-gradient(45deg,var(--accent),#00b894);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 8px 25px rgba(0,212,170,0.5);}
  button:hover{transform:translateY(-4px);box-shadow:0 15px 35px rgba(0,212,170,0.7);}

  .qr{max-width:300px;margin:25px auto;display:block;border:6px solid var(--accent);border-radius:18px;box-shadow:0 0 30px var(--accent);}
  .hidden{display:none}

  /* Vòng quay */
  #wheelContainer{text-align:center;margin:40px 0;}
  #wheel{width:320px;height:320px;border-radius:50%;border:12px solid #fff;box-shadow:0 0 50px var(--accent);transition:transform 5s cubic-bezier(0.17,0.67,0.12,0.99);}
  .prize{text-align:center;margin-top:20px;font-size:2rem;color:var(--gold);font-weight:bold;}

  /* Đánh giá */
  .review{background:#f9f9f9;padding:20px;margin:15px 0;border-radius:15px;border-left:5px solid var(--gold);}
  .stars{color:#ffbb00;font-size:1.5rem;}
</style>
</head>
<body>

<div class="header"><h1>ROBUXVN.SHOP</h1></div>

<div class="nav">
  <button onclick="openTab('home')" class="active">TRANG CHỦ</button>
  <button onclick="openTab('nap')">NẠP ROBUX</button>
  <button onclick="openTab('rut')">RÚT ROBUX</button>
  <button onclick="openTab('vongquay')">VÒNG QUAY</button>
  <button onclick="openTab('giftcode')">GIFTCODE</button>
  <button onclick="openTab('danhgia')">ĐÁNH GIÁ</button>
</div>

<div class="container">

  <!-- Trang chủ -->
  <div id="home" class="tab active">
    <h2>Xin chào <span id="name">khách</span>!</h2>
    <p style="text-align:center;font-size:26px;margin:25px 0">
      Số dư: <b id="bal" style="color:var(--gold)">0</b> Robux
    </p>
    <div style="text-align:center"><button style="padding:20px 60px;font-size:22px">NẠP ROBUX NGAY</button></div>
  </div>

  <!-- Nạp Robux -->
  <div id="nap" class="tab">
    <h2>NẠP ROBUX QUA NGÂN HÀNG</h2>
    <p style="text-align:center;color:#555;margin-bottom:20px"><b>10.000đ = 65 Robux</b></p>
    <div class="packages">
      <div class="pkg" onclick="setAmount(100000)"><h3>650 Robux</h3><p>100k</p></div>
      <div class="pkg" onclick="setAmount(200000)"><h3>1.300 Robux</h3><p>200k</p></div>
      <div class="pkg" onclick="setAmount(500000)"><h3>3.250 Robux</h3><p>500k</p></div>
      <div class="pkg" onclick="setAmount(1000000)"><h3>6.500 Robux</h3><p>1 triệu</p></div>
    </div>
    <input type="number" id="amount" placeholder="Nhập số tiền (tối thiểu 50k)">
    <button onclick="createQR()">TẠO MÃ QR</button>
    <div id="qrDiv"></div>
  </div>

  <!-- Rút Robux -->
  <div id="rut" class="tab">
    <h2>RÚT ROBUX</h2>
    <input type="text" id="rbxUser" placeholder="Username Roblox">
    <input type="number" id="rbxAmt" placeholder="Số Robux muốn rút">
    <button onclick="sendRut()">GỬI YÊU CẦU</button>
    <p id="rutMsg"></p>
  </div>

  <!-- Vòng quay may mắn -->
  <div id="vongquay" class="tab">
    <h2>VÒNG QUAY MAY MẮN</h2>
    <p style="text-align:center;font-size:20px;margin-bottom:20px">
      Giá quay: <b style="color:var(--gold)">30 Robux</b> / lần
    </p>
    <div id="wheelContainer">
      <canvas id="wheel" width="340" height="340"></canvas>
      <div class="prize" id="prizeText">Nhấn QUAY để bắt đầu!</div>
      <button onclick="spin()" style="margin-top:25px;padding:18px 50px;font-size:20px">QUAY NGAY – 30 Robux</button>
    </div>
  </div>

  <!-- Giftcode -->
  <div id="giftcode" class="tab">
    <h2>NHẬP GIFTCODE</h2>
    <input type="text" id="giftInput" placeholder="Nhập mã giftcode">
    <button onclick="useGift()">SỬ DỤNG</button>
    <p id="giftMsg"></p>
  </div>

  <!-- Đánh giá -->
  <div id="danhgia" class="tab">
    <h2>ĐÁNH GIÁ TỪ KHÁCH HÀNG (5★)</h2>
    <div id="reviews"></div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
// Tab
function openTab(t){document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  document.querySelectorAll('.nav button').forEach(x=>x.classList.remove('active'));
  document.getElementById(t).classList.add('active');
  document.querySelector(`button[onclick="openTab('${t}')"]`).classList.add('active');}

// Nạp
function setAmount(v){document.getElementById("amount").value=v;}
async function createQR(){
  const a=document.getElementById("amount").value;
  if(!a||a<50000)return Swal.fire({icon:"warning",title:"Tối thiểu 50.000đ"});
  const r=await axios.post("/qr",{amount:Number(a),user:"demo"});
  document.getElementById("qrDiv").innerHTML=`
    <p style="text-align:center">Nạp <b>${(a/10000*65).toLocaleString()} Robux</b></p>
    <img class="qr" src="${r.data.qr}">
    <p style="text-align:center;word-break:break-all"><b>Nội dung:</b> ${r.data.desc}</p>`;
}

// Rút
async function sendRut(){
  const u=document.getElementById("rbxUser").value;
  const r=document.getElementById("rbxAmt").value;
  if(!u||!r)return Swal.fire({icon:"warning",title:"Nhập đầy đủ"});
  Swal.fire({icon:"success",title:"Đã gửi yêu cầu!",text:"Admin sẽ donate trong 1-3 phút"});
}

// Vòng quay
const prizes = [
  {text:"5 Robux",   color:"#7289da", chance:30},
  {text:"10 Robux",  color:"#99aab5", chance:25},
  {text:"30 Robux",  color:"#2ecc71", chance:20},
  {text:"50 Robux",  color:"#3498db", chance:15},
  {text:"200 Robux", color:"#e91e63", chance:0.5},
  {text:"500 Robux", color:"#f1c40f", chance:0.1}
];
let spinning = false;
function drawWheel(){
  const canvas = document.getElementById("wheel");
  const ctx = canvas.getContext("2d");
  let total = prizes.reduce((a,b)=>a+b.chance,0);
  let start = 0;
  prizes.forEach((p,i)=>{
    let angle = (p.chance/total)*2*Math.PI;
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.moveTo(170,170);
    ctx.arc(170,170,170,start,start+angle);
    ctx.fill();
    ctx.save();
    ctx.translate(170,170);
    ctx.rotate(start+angle/2);
    ctx.textAlign="center";
    ctx.fillStyle="#fff";
    ctx.font="bold 18px Roboto";
    ctx.fillText(p.text,100,10);
    ctx.restore();
    start += angle;
  });
}
drawWheel();

function spin(){
  if(spinning) return;
  // Giả lập trừ 30 Robux (thực tế sẽ gọi API trừ ở đây)
  Swal.fire({
    title:"Đang quay...",allowOutsideClick:false,
    didOpen:()=>{Swal.showLoading()}
  });
  spinning=true;
  const canvas=document.getElementById("wheel");
  let rot = Math.floor(Math.random()*10)+15; // 15-25 vòng
  canvas.style.transform = `rotate(${canvas.style.transform||'rotate(0deg)'} rotate(${rot*360}deg)`;
  
  setTimeout(()=>{
    let rand = Math.random()*100;
    let sum = 0, win;
    for(let p of prizes){
      sum += p.chance;
      if(rand <= sum){win=p;break;}
    }
    document.getElementById("prizeText").innerHTML = `CHÚC MỪNG BẠN NHẬN ĐƯỢC<br><b style="font-size:3rem;color:${win.color}">${win.text}</b>`;
    Swal.fire({icon:"success",title:"CHÚC MỪNG!",html:`Bạn đã trúng <b>${win.text}</b>`,timer:5000});
    spinning=false;
  },5500);
}

// Giftcode demo
function useGift(){
  const c = document.getElementById("giftInput").value.trim().toUpperCase();
  if(["NOEL2025","ROBUXVN","FREE500"].includes(c)){
    Swal.fire({icon:"success",title:"Thành công!",text:"Bạn nhận được 500 Robux!"});
  }else{
    Swal.fire({icon:"error",title:"Sai mã!",text:"Mã giftcode không tồn tại"});
  }
}

// Tự sinh đánh giá
const fakeReviews = [
  "Shop uy tín, rút siêu nhanh trong 2 phút! 5 sao","Nạp 500k được đúng 3250 Robux, chuẩn luôn","Vòng quay trúng 200R, ngon quá admin ơi","Hỗ trợ nhiệt tình, lần sau lại ủng hộ","Rút 10k Robux chỉ 3 phút có, shop chất lượng","Đã nạp hơn 5 triệu, chưa bao giờ bị lỗi","Shop đẹp, giao diện như Roblox thật","Admin dễ thương, donate đúng username luôn","Giá rẻ nhất thị trường hiện tại","Rút lúc 3h sáng vẫn có người duyệt, tuyệt vời!"
];
function genReviews(){
  const container = document.getElementById("reviews");
  fakeReviews.sort(()=>Math.random()-0.5);
  fakeReviews.slice(0,12).forEach((text,i)=>{
    const r=document.createElement("div");r.className="review";
    r.innerHTML = `<div class="stars">★★★★★</div><b>Khách hàng #${2025+i}</b><p>${text}</p>`;
    container.appendChild(r);
  });
}
genReviews();
</script>
</body>
</html>
